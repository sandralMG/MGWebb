-
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.3.3/dist/semantic.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js "></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
    <link rel="stylesheet" type="text/css" href="../../../style/style.css">

    <title>Webbserverprogrammering 1</title>
</head>

<body>
    <!--Sidebar-->
    <div class="ui sidebar vertical menu">


        <div class="item">
            <div class="header">
                Webbserverprogrammering 1
            </div>
            <div class="menu">
                <a class="item" href="../info/planering.html">
                    Planering
                </a>
                <a class="item" href="../info/kursplan.html">
                    Kursens innehåll
                </a>

            </div>
        </div>



        <div class="item">
            <div class="header">
                PHP
            </div>
            <div class="menu">
                <a class="item" href="../php/gettingstarted.html">
                    Komma igång
                </a>
                <a class="item" href="../php/phpbasics.html">
                    PHP Grunder
                </a>
                <a class="item" href="../php/filehandle.html">
                    Filhantering
                </a>
                <a class="item" href="../php/sessions.html">
                    Sessioner
                </a>
                <a class="item" href="../php/redirects.html">
                    Omdirigering
                </a>
                <a class="item">
                </a>
                <a class="item">
                </a>
                <a class="item">
                </a>
                <a class="item">
                </a>
                <a class="item">
                </a>
            </div>
        </div>

        <div class="item">
            <div class="header">
                Databaser
            </div>
            <div class="menu">
                <a class="item" href="../databaser/intro_db.html">
                    Introduktion
                </a>
                <a class="item" href="../databaser/connect_db.html">
                    Databasuppkoppling
                </a>
                <a class="item" href="../databaser/query_db.html">
                    Databasförfrågningar
                </a>
                <a class="item" href="../databaser/url_parameter.html">
                    Använda url-parametrar
                </a>
            </div>
        </div>

        <div class="item">
            <div class="header">
                Säkerhet
            </div>
            <div class="menu">
                <a class="item" href="about.html">Om säkerhet
                </a>
                <a class="item" href="sql_injections.html">SQL Injektioner
                </a>
                <a class="item" href="crypt_password.html">Kryptera lösenord
                </a>

            </div>
        </div>
        <div class="item">
            <div class="header">
                Projektarbete
            </div>
            <div class="menu">
                <a class="item">
                </a>
                <a class="item">
                </a>
                <a class="item">
                </a>
                <a class="item">
                </a>

            </div>

        </div>


    </div>
    <!--end of sidebar-->
    <!-- Pusher-->
    <div class="pusher">

        <!-- Top menu-->
        <div class="top ui fixed menu">
            <a class="item sidebar">
                <i class="icon big sidebar"></i>
            </a>
            <a class="item">
                <div class="ui header">Webbserverprogrammering 1</div>
            </a>
            <div class="right menu">
                <div class="right menu">
                    <div class="item">

                        <a href="../../../index.html">
                            <img src=" ../../../assets/images/mglogo.jpg " width="100px ">
                        </a>
                    </div>
                    <div class="ui dropdown item">
                        Kurser
                        <i class="dropdown icon"></i>
                        <div class="menu">
                            <a class="item" href="../../webb1/info/kursplan.html">Webbutveckling 1</a>
                            <a class="item" href="../../webb2/info/kursplan.html">Webbutveckling 2</a>
                            <a class="item" href="../../webbsev1/info/kursplan.html">Webbserverprogrammering 1</a>
                        </div>
                    </div>
                    <div class="item">
                        <div class="ui icon input">
                            <input type="text" placeholder="Sök...">
                            <i class="search link icon"></i>
                        </div>
                    </div>

                </div>
            </div>
            <!--end of top menu-->

        </div>
        <!--end of pusher-->
        <div class="ui main container">

            <div class="ui  grid">
                <div class="row">
                    <div class="three wide column">
                        <!--   <div class="ui grey segment">
              <p>three wide column</p>
            </div> -->
                    </div>
                    <div class="ten wide column">
                        <div class="ui vertical segment">

                            <h1 class="ui header"> SQL Injektioner</h1>

                            <p>
                                SQL-injektioner är en av de vanligaste säkerhetsluckorna som förekommer i PHP. I
                                huvudsak har inmatningsfältet på din webbplats som syfte att tillåta användare att
                                skriva in information till din databas. Hackers utnyttjar den här funktionen genom att
                                skriva in SQL-satser i sådana fält och därigenom få direktkontakt med databasen.
                                Den här typen av hackningsteknik utnyttjar felaktig kodning av webbplatser genom att
                                injicera SQL-kommandon i inmatningsfält. I stället för att ange ett lösenord vid
                                inloggning kan man därför, om man har de kunskaper som krävs, i fältet för lösenord
                                mata in en instruktion som gör att databasen
                                antingen lämnar ifrån sig rätt lösen­ord eller tror att lösenordet redan är inmatat.
                                En angripare kan även avsiktiligt bädda in en "DROP TABLE" uttalande som är
                                instruktionen för att radera en tabell, vilket på så sätt kan vara förgörande för en
                                databas.
                                Denna säkerhetslucka förekommer i olika typer av databaser, eftersom SQL har varit de
                                vanligaste har just den referensen till injektioner blivit det allmänna talesättet.



                            </p>



                            <h3 class="ui header"> Exempel på en SQL injektion </h3>
                            <p>Ett inloggningssystem skulle kunna ha följande SQL-fråga för att undersöka om ett
                                lösenord är korrekt mot användarnamnet där man exempelvos hämtar $user och
                                $password
                                via $_POST:</p>
                            <div class="ui compact segment">
                                <pre><code class="sql">$query = "SELECT * FROM users WHERE user = '" + $user + "' and password = '" + $password + "'";</code></pre>
                            </div>
                            <p> Med användarnamnet kalle och lösenordet abc123 skulle SQL-frågan bli:</p>
                            <div class="ui compact segment">
                                <pre><code class="sql">SELECT * FROM users WHERE user = 'kalle' and password = 'abc123';</code></pre>
                            </div>
                            <p>Om en illasinnad användare som lösenord skriver in följande i inmatningsfältet för
                                formuläret:</p>
                            <div class="ui compact segment">
                                <pre><code class="sql">' OR '' = '</code></pre>
                            </div>
                            <p> Så blir SQL-frågan följande:</p>
                            <div class="ui compact segment">
                                <pre><code class="sql">SELECT * FROM users WHERE user = 'kalle' and password = '' OR '' = ''</code></pre>
                            </div>
                            <p>Jämförelsen längst till höger mellan två tomma strängar kommer alltid att leda till
                                att
                                resultatet blir sant, och användaren kommer alltid att loggas in.</p>
                            <div class="ui  divider"></div>
                            <p>Ett annat exempel på hur en hel tabell kan raderas genom att utöka med DROP som är
                                kommandot för att radera en tabell. </p>
                            Om följande text matas in i ett formulärfält som tar emot indata med $_POST och matas in i
                            databasen.<br />
                            <div class="ui compact segment">
                                <pre><code class="sql">kalle; DROP TABLE users</code></pre>
                            </div>

                            <p>Indatat skulle kunna bli. Instruktionen skulle leda till att tabellen users i databsen
                                raderas.</p>
                            <div class="ui compact segment">
                                <pre><code class="sql">SELECT * FROM users WHERE user = 'kalle'; DROP TABLE users</code></pre>
                            </div>
                            <p> En seriestripp om de
                                försvunna tabellerna <i>Bobby Tables</i> :-) . <a href="https://xkcd.com/327/">Hämtat
                                    från denna sida.</a> </p>


                            <img src="../../../assets/images/sql_injection_strip.jpg" alt="Om databaser" width="600px">
                            <br />
                            <a href="https://stackoverflow.com/questions/332365/how-does-the-sql-injection-from-the-bobby-tables-xkcd-comic-work/332367#332367">Här
                                finns en mer nogrann förklaring för dig som är intresserad :-) </a>
                        </div>


                        <div class="ui vertical center aligned segment">
                        </div>
                        <h3 class="ui header"> Hur skyddar man sig mot SQL- injektioner?</h3>
                        SQL injektioner är alltså ett direkt resultat att
                        inte ha filtrerat och ”escapat” data korrekt.
                        <p>Vi behöver rensa indata på farliga tecken som saboterar vårt SQL-anrop.
                            Det gör vi genom att anropa en php-funktion som heter
                            mysqli_real_escape_string().
                            Funktionen rensar textsträngen från speciella tecken så att det blir säkert att köra
                            strängen i ett mysqli_query()-anrop.</p>

                        <div class="ui compact segment">
                            <pre><code class="php">
$username = $_POST['username'];
$password= $_POST['password'];

$username = mysqli_real_escape_string($connection, $username);
$password = mysqli_real_escape_string($connection, $password);</code></pre>
                        </div>

                        <div class="ui warning message">

                            <div class="header">
                                PDO är att föredra
                            </div>
                            I kursen använder vi mysqli som API mellan PHP och databas. PDO är egentligen den mer
                            moderna varianten att använda och ger en mycket bättre försvarsåtgärd mot SQL injektioner.
                        </div>


                        <div class="ui segment link">
                            <h4 class="ui header link">Länkar </h4>
                            <a href="http://php.net/manual/en/mysqli.real-escape-string.php">PHP manual SQL injections</a>
                            <br>


                        </div>



                        <div class="ui hidden divider"></div>


                        <a href="about.html">
                            <button class="ui left floated labeled icon button">
                                <i class="left arrow icon"></i>
                                Om säkerhet</button>
                        </a>

                        <a href="crypt_password.html">
                            <button class="ui right floated labeled icon button">
                                <i class="right arrow icon"></i>
                                Kryptering av lösenord</button>
                        </a>


                    </div>
                    <div class="three wide column ">
                        <!--  <div class="ui grey segment ">
              <p>three wide column</p>
            </div> -->
                    </div>
                </div>
            </div>

        </div>
    </div>

    </div>

    <!--Footer-->
    <div class="ui inverted vertical center aligned footer segment">
        <div class="ui container">

            <!-- <h4 class="ui inverted header">Footer Header</h4> -->
            <p>&copy; &nbsp; Sandra Larsson, Mediagymnasiet Nacka Strand</p>

        </div>
    </div>
    <!--end of footer-->
    <!--Code syntax highlightning-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js "></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js "></script>
    <!--jQuery include -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js " integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
        crossorigin=" anonymous "></script>
    <!-- Semantic UI include script-->
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.3.3/dist/semantic.min.js "></script>
    <!--Local script-->
    <script src="../../../src/script.js "></script>
</body>

</html>